<!DOCTYPE html>
<html>
<head>
    <title>网页框架</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入vConsole调试工具 -->
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
</head>
<body>
    <iframe 
        src="http://md.yituike.com/pages/my/index?page_invite_code=pWTII94" 
        style="width: 100%; height: 100vh; border: none"
        allowfullscreen>
    </iframe>

    <script>
        // 初始化vConsole
        var vConsole = new VConsole();
        console.log('vConsole已启动');

        // 创建监控面板
        const monitorDiv = document.createElement('div');
        monitorDiv.style.position = 'fixed';
        monitorDiv.style.right = '0';
        monitorDiv.style.bottom = '0';
        monitorDiv.style.background = 'white';
        document.body.appendChild(monitorDiv);

        // 拦截fetch请求
        const originalFetch = window.fetch;
        window.fetch = async (...args) => {
          const start = Date.now();
          const response = await originalFetch(...args);
          
          // 克隆响应以便读取
          const clone = response.clone();
          clone.json().then(data => {
            monitorDiv.innerHTML += `
              <div style="border:1px solid #ccc; margin:5px; padding:5px">
                <div>URL: ${args[0]}</div>
                <div>状态: ${response.status}</div>
                <div>耗时: ${Date.now() - start}ms</div>
                <div>响应数据: ${JSON.stringify(data)}</div>
              </div>
            `;
          });
          
          return response;
        };

        // 拦截XMLHttpRequest
        const originalOpen = XMLHttpRequest.prototype.open;
        XMLHttpRequest.prototype.open = function(method, url) {
          this.addEventListener('load', function() {
            monitorDiv.innerHTML += `
              <div style="border:1px solid #ccc; margin:5px; padding:5px">
                <div>URL: ${url}</div>
                <div>状态: ${this.status}</div>
                <div>响应数据: ${this.responseText}</div>
              </div>
            `;
          });
          originalOpen.apply(this, arguments);
        };
    </script>
</body>
</html>
