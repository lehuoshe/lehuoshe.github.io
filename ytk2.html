<!DOCTYPE html>
<html>
<head>
    <title>网页框架</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 引入vConsole调试工具 -->
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
</head>
<body>
    <iframe 
        src="http://md.yituike.com" 
        style="width: 100%; height: 100vh; border: none"
        allowfullscreen>
    </iframe>

    <script>
        // 初始化vConsole
        var vConsole = new VConsole();
        console.log('vConsole已启动');

        // 创建监控面板
        const monitorDiv = document.createElement('div');
        monitorDiv.style.position = 'fixed';
        monitorDiv.style.right = '0';
        monitorDiv.style.bottom = '0';
        monitorDiv.style.background = 'white';
        document.body.appendChild(monitorDiv);

        // 拦截fetch请求
        const originalFetch = window.fetch;
        // 修改fetch拦截逻辑
        window.fetch = async (...args) => {
          const [input] = args;
          const start = Date.now();
          const response = await originalFetch(...args);
        
          if (typeof input === 'string' && input.includes('memberProfile')) {
            const clone = response.clone();
            clone.json().then(data => {
              // 创建弹窗组件
              const modal = document.createElement('div');
              modal.style = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.3)';
              modal.innerHTML = `
                <h3>会员资料接口响应</h3>
                <pre>${JSON.stringify(data, null, 2)}</pre>
                <button onclick="this.parentElement.remove()">关闭</button>
              `;
              document.body.appendChild(modal);
            }).catch(err => {
              console.error('解析响应失败:', err);
            });
          }
          return response;
        };
        
        // 修改XMLHttpRequest拦截逻辑
        XMLHttpRequest.prototype.open = function(method, url) {
          if (url.includes('memberProfile')) {
            this.addEventListener('load', function() {
              const modal = document.createElement('div');
              modal.style = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.3)';
              modal.innerHTML = `
                <h3>会员资料接口响应</h3>
                <pre>${this.responseText}</pre>
                <button onclick="this.parentElement.remove()">关闭</button>
              `;
              document.body.appendChild(modal);
            });
          }
          originalOpen.apply(this, arguments);
        };
    </script>
</body>
</html>
