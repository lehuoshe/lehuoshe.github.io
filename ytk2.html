<!DOCTYPE html>
<html>
<head>
    <title>ç½‘é¡µæ¡†æ¶</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- å¼•å…¥vConsoleè°ƒè¯•å·¥å…· -->
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
</head>
<body>
    <iframe 
        src="http://md.yituike.com" 
        style="width: 100%; height: 100vh; border: none"
        allowfullscreen>
    </iframe>

    <script>
        // åˆå§‹åŒ–vConsole
        var vConsole = new VConsole();
        console.log('vConsoleå·²å¯åŠ¨');

        // åˆ›å»ºç›‘æ§é¢æ¿
        const monitorDiv = document.createElement('div');
        // ä¿®æ”¹ç›‘æ§é¢æ¿æ ·å¼
        monitorDiv.style = `
          position: fixed;
          bottom: -50%;
          left: 0;
          width: 100%;
          height: 50%;
          background: rgba(255,255,255,0.95);
          transition: all 0.3s;
          box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
          overflow-y: auto;
          z-index: 9997;
        `;
        
        // æ·»åŠ è§¦å‘æŒ‰é’®
        const triggerBtn = document.createElement('div');
        triggerBtn.style = `
          position: fixed;
          right: 15px;
          bottom: 15px;
          width: 40px;
          height: 40px;
          background: #2196F3;
          border-radius: 50%;
          box-shadow: 0 2px 5px rgba(0,0,0,0.3);
          cursor: pointer;
          z-index: 9999;
        `;
        triggerBtn.innerHTML = 'ğŸ“Š';

        triggerBtn.addEventListener('click', () => {
          monitorDiv.style.bottom = monitorDiv.style.bottom === '0px' ? '-50%' : '0px';
        });

        document.body.appendChild(triggerBtn);

        // æ·»åŠ è§¦æ‘¸äº‹ä»¶
        let touchStartY = 0;
        monitorDiv.addEventListener('touchstart', e => {
          touchStartY = e.touches[0].clientY;
        });

        monitorDiv.addEventListener('touchmove', e => {
          const touchY = e.touches[0].clientY;
          if (touchY - touchStartY > 50) {
            monitorDiv.style.bottom = '-50%';
          }
        });
        monitorDiv.style.zIndex = '9998';  // ç¡®ä¿å±‚çº§ä½äºå¼¹çª—
        monitorDiv.style.padding = '10px';
        monitorDiv.style.minWidth = '300px';
        console.log('ç›‘æ§é¢æ¿å·²åˆ›å»º:', monitorDiv);
        
        // åœ¨fetchæ‹¦æˆªå™¨å¼€å¤´æ·»åŠ è¯·æ±‚æ—¥å¿—
        window.fetch = async (...args) => {
        console.log('[è¯·æ±‚æ‹¦æˆª] å¼€å§‹å¤„ç†:', args[0]);
        const [input] = args;
        const start = Date.now();
        const response = await originalFetch(...args);
        
        if (typeof input === 'string' && input.includes('memberProfile')) {
          const clone = response.clone();
          clone.json().then(data => {
            // åˆ›å»ºå¼¹çª—ç»„ä»¶
            const modal = document.createElement('div');
            modal.style = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.3)';
            modal.innerHTML = `
              <h3>ä¼šå‘˜èµ„æ–™æ¥å£å“åº”</h3>
              <pre>${JSON.stringify(data, null, 2)}</pre>
              <button onclick="this.parentElement.remove()">å…³é—­</button>
            `;
            document.body.appendChild(modal);
          }).catch(err => {
            console.error('è§£æå“åº”å¤±è´¥:', err);
          });
        }
        return response;
        };
        
        // ä¿®æ”¹XMLHttpRequestæ‹¦æˆªé€»è¾‘
        XMLHttpRequest.prototype.open = function(method, url) {
          if (url.includes('memberProfile')) {
            this.addEventListener('load', function() {
              const modal = document.createElement('div');
              modal.style = 'position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;z-index:9999;box-shadow:0 0 10px rgba(0,0,0,0.3)';
              modal.innerHTML = `
                <h3>ä¼šå‘˜èµ„æ–™æ¥å£å“åº”</h3>
                <pre>${this.responseText}</pre>
                <button onclick="this.parentElement.remove()">å…³é—­</button>
              `;
              document.body.appendChild(modal);
            });
          }
          originalOpen.apply(this, arguments);
        };
        
        // åœ¨å¼¹çª—åˆ›å»ºæ—¶æ·»åŠ è¾¹ç•Œæ£€æŸ¥
        modal.style.maxHeight = '80vh';
        modal.style.overflow = 'auto';
        console.log('å¼¹çª—å·²åˆ›å»º:', modal);
        
        // æ·»åŠ å…¨å±€é”™è¯¯æ•è·
        window.addEventListener('error', function(e) {
          console.error('å…¨å±€é”™è¯¯:', e.message, 'at', e.filename, 'line', e.lineno);
        });
        
        // æ·»åŠ DOMåŠ è½½å®Œæˆæ£€æŸ¥
        document.addEventListener('DOMContentLoaded', function() {
          console.log('DOMå·²åŠ è½½å®Œæˆ');
          // ç¡®ä¿åœ¨æ­¤äº‹ä»¶ä¸­æ‰§è¡Œç›‘æ§åˆå§‹åŒ–
        });
    </script>
</body>
</html>
